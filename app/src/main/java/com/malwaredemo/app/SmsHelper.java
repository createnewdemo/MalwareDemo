package com.malwaredemo.app;

import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class SmsHelper {
    /**
     * 获取短信内容
     *
     */
    public static String getSmsBody(Intent intent){
        String tempString = "";
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            if (pdus != null) {
                SmsMessage[] messages = new SmsMessage[pdus.length];
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    //可能有回车 合并为一个完整的短信消息
                    tempString += messages[i].getDisplayMessageBody();
                }

//                // 处理短信消息
//                for (SmsMessage message : messages) {
//                    String body = message.getMessageBody();
//                    String sender = message.getOriginatingAddress();
//
//                    // 进行自定义的短信处理逻辑
//                }
            }
        }

        return tempString;
    }

    /**
     * 获取短信地址
     */
    public  static  String getSmsAdderss(Intent intent) {
        Bundle bundle = intent.getExtras();
        Object pdus[] = (Object[]) bundle.get("pdus");

        return SmsMessage.createFromPdu((byte[]) pdus[0]).getDisplayMessageBody();

    }

}
